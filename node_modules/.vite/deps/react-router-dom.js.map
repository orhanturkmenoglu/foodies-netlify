{"version":3,"file":"react-router-dom.js","names":[],"sources":["../../react-router/dist/development/dom-export.mjs"],"sourcesContent":["/**\n * react-router v7.9.3\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\n\"use client\";\nimport {\n  deserializeErrors,\n  getHydrationData\n} from \"./chunk-65XJMMLO.mjs\";\nimport {\n  CRITICAL_CSS_DATA_ATTRIBUTE,\n  FrameworkContext,\n  RemixErrorBoundary,\n  RouterProvider,\n  createBrowserHistory,\n  createClientRoutes,\n  createClientRoutesWithHMRRevalidationOptOut,\n  createRouter,\n  decodeViaTurboStream,\n  getPatchRoutesOnNavigationFunction,\n  getTurboStreamSingleFetchDataStrategy,\n  hydrationRouteProperties,\n  invariant,\n  mapRouteProperties,\n  useFogOFWarDiscovery\n} from \"./chunk-NISHYRIK.mjs\";\n\n// lib/dom-export/dom-router-provider.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nfunction RouterProvider2(props) {\n  return /* @__PURE__ */ React.createElement(RouterProvider, { flushSync: ReactDOM.flushSync, ...props });\n}\n\n// lib/dom-export/hydrated-router.tsx\nimport * as React2 from \"react\";\nvar ssrInfo = null;\nvar router = null;\nfunction initSsrInfo() {\n  if (!ssrInfo && window.__reactRouterContext && window.__reactRouterManifest && window.__reactRouterRouteModules) {\n    if (window.__reactRouterManifest.sri === true) {\n      const importMap = document.querySelector(\"script[rr-importmap]\");\n      if (importMap?.textContent) {\n        try {\n          window.__reactRouterManifest.sri = JSON.parse(\n            importMap.textContent\n          ).integrity;\n        } catch (err) {\n          console.error(\"Failed to parse import map\", err);\n        }\n      }\n    }\n    ssrInfo = {\n      context: window.__reactRouterContext,\n      manifest: window.__reactRouterManifest,\n      routeModules: window.__reactRouterRouteModules,\n      stateDecodingPromise: void 0,\n      router: void 0,\n      routerInitialized: false\n    };\n  }\n}\nfunction createHydratedRouter({\n  getContext\n}) {\n  initSsrInfo();\n  if (!ssrInfo) {\n    throw new Error(\n      \"You must be using the SSR features of React Router in order to skip passing a `router` prop to `<RouterProvider>`\"\n    );\n  }\n  let localSsrInfo = ssrInfo;\n  if (!ssrInfo.stateDecodingPromise) {\n    let stream = ssrInfo.context.stream;\n    invariant(stream, \"No stream found for single fetch decoding\");\n    ssrInfo.context.stream = void 0;\n    ssrInfo.stateDecodingPromise = decodeViaTurboStream(stream, window).then((value) => {\n      ssrInfo.context.state = value.value;\n      localSsrInfo.stateDecodingPromise.value = true;\n    }).catch((e) => {\n      localSsrInfo.stateDecodingPromise.error = e;\n    });\n  }\n  if (ssrInfo.stateDecodingPromise.error) {\n    throw ssrInfo.stateDecodingPromise.error;\n  }\n  if (!ssrInfo.stateDecodingPromise.value) {\n    throw ssrInfo.stateDecodingPromise;\n  }\n  let routes = createClientRoutes(\n    ssrInfo.manifest.routes,\n    ssrInfo.routeModules,\n    ssrInfo.context.state,\n    ssrInfo.context.ssr,\n    ssrInfo.context.isSpaMode\n  );\n  let hydrationData = void 0;\n  if (ssrInfo.context.isSpaMode) {\n    let { loaderData } = ssrInfo.context.state;\n    if (ssrInfo.manifest.routes.root?.hasLoader && loaderData && \"root\" in loaderData) {\n      hydrationData = {\n        loaderData: {\n          root: loaderData.root\n        }\n      };\n    }\n  } else {\n    hydrationData = getHydrationData({\n      state: ssrInfo.context.state,\n      routes,\n      getRouteInfo: (routeId) => ({\n        clientLoader: ssrInfo.routeModules[routeId]?.clientLoader,\n        hasLoader: ssrInfo.manifest.routes[routeId]?.hasLoader === true,\n        hasHydrateFallback: ssrInfo.routeModules[routeId]?.HydrateFallback != null\n      }),\n      location: window.location,\n      basename: window.__reactRouterContext?.basename,\n      isSpaMode: ssrInfo.context.isSpaMode\n    });\n    if (hydrationData && hydrationData.errors) {\n      hydrationData.errors = deserializeErrors(hydrationData.errors);\n    }\n  }\n  let router2 = createRouter({\n    routes,\n    history: createBrowserHistory(),\n    basename: ssrInfo.context.basename,\n    getContext,\n    hydrationData,\n    hydrationRouteProperties,\n    mapRouteProperties,\n    future: {\n      middleware: ssrInfo.context.future.v8_middleware\n    },\n    dataStrategy: getTurboStreamSingleFetchDataStrategy(\n      () => router2,\n      ssrInfo.manifest,\n      ssrInfo.routeModules,\n      ssrInfo.context.ssr,\n      ssrInfo.context.basename\n    ),\n    patchRoutesOnNavigation: getPatchRoutesOnNavigationFunction(\n      ssrInfo.manifest,\n      ssrInfo.routeModules,\n      ssrInfo.context.ssr,\n      ssrInfo.context.routeDiscovery,\n      ssrInfo.context.isSpaMode,\n      ssrInfo.context.basename\n    )\n  });\n  ssrInfo.router = router2;\n  if (router2.state.initialized) {\n    ssrInfo.routerInitialized = true;\n    router2.initialize();\n  }\n  router2.createRoutesForHMR = /* spacer so ts-ignore does not affect the right hand of the assignment */\n  createClientRoutesWithHMRRevalidationOptOut;\n  window.__reactRouterDataRouter = router2;\n  return router2;\n}\nfunction HydratedRouter(props) {\n  if (!router) {\n    router = createHydratedRouter({\n      getContext: props.getContext\n    });\n  }\n  let [criticalCss, setCriticalCss] = React2.useState(\n    process.env.NODE_ENV === \"development\" ? ssrInfo?.context.criticalCss : void 0\n  );\n  React2.useEffect(() => {\n    if (process.env.NODE_ENV === \"development\") {\n      setCriticalCss(void 0);\n    }\n  }, []);\n  React2.useEffect(() => {\n    if (process.env.NODE_ENV === \"development\" && criticalCss === void 0) {\n      document.querySelectorAll(`[${CRITICAL_CSS_DATA_ATTRIBUTE}]`).forEach((element) => element.remove());\n    }\n  }, [criticalCss]);\n  let [location, setLocation] = React2.useState(router.state.location);\n  React2.useLayoutEffect(() => {\n    if (ssrInfo && ssrInfo.router && !ssrInfo.routerInitialized) {\n      ssrInfo.routerInitialized = true;\n      ssrInfo.router.initialize();\n    }\n  }, []);\n  React2.useLayoutEffect(() => {\n    if (ssrInfo && ssrInfo.router) {\n      return ssrInfo.router.subscribe((newState) => {\n        if (newState.location !== location) {\n          setLocation(newState.location);\n        }\n      });\n    }\n  }, [location]);\n  invariant(ssrInfo, \"ssrInfo unavailable for HydratedRouter\");\n  useFogOFWarDiscovery(\n    router,\n    ssrInfo.manifest,\n    ssrInfo.routeModules,\n    ssrInfo.context.ssr,\n    ssrInfo.context.routeDiscovery,\n    ssrInfo.context.isSpaMode\n  );\n  return (\n    // This fragment is important to ensure we match the <ServerRouter> JSX\n    // structure so that useId values hydrate correctly\n    /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\n      FrameworkContext.Provider,\n      {\n        value: {\n          manifest: ssrInfo.manifest,\n          routeModules: ssrInfo.routeModules,\n          future: ssrInfo.context.future,\n          criticalCss,\n          ssr: ssrInfo.context.ssr,\n          isSpaMode: ssrInfo.context.isSpaMode,\n          routeDiscovery: ssrInfo.context.routeDiscovery\n        }\n      },\n      /* @__PURE__ */ React2.createElement(RemixErrorBoundary, { location }, /* @__PURE__ */ React2.createElement(\n        RouterProvider2,\n        {\n          router,\n          unstable_onError: props.unstable_onError\n        }\n      ))\n    ), /* @__PURE__ */ React2.createElement(React2.Fragment, null))\n  );\n}\nexport {\n  HydratedRouter,\n  RouterProvider2 as RouterProvider\n};\n"],"mappings":"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"}